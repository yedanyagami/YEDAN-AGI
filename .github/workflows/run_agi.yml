name: YEDAN AGI Autopilot (Independent Runtime)

on:
  # 1. å®šæ™‚åŸ·è¡Œï¼šæ¯ 6 å°æ™‚ä¸€æ¬¡ (UTC æ™‚é–“)
  schedule:
    - cron: '0 */6 * * *'
  # 2. æ‰‹å‹•åŸ·è¡Œï¼šå¯ä»¥åœ¨ GitHub ç¶²é ä¸Šé»æ“Š "Run workflow"
  workflow_dispatch:

jobs:
  run-agi-omega:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout Memory & Code
      uses: actions/checkout@v3
      
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: Install Dependencies
      run: |
        pip install requests
        
    - name: ğŸ§  Wake Up AGI (Execute Main Logic)
      env:
        # é€™è£¡æ³¨å…¥ç’°å¢ƒè®Šæ•¸ï¼Œè®“å®ƒèƒ½çœŸçš„åšäº‹
        GMAIL_USER: ${{ secrets.GMAIL_USER }}
        GMAIL_PASS: ${{ secrets.GMAIL_PASS }}
      run: |
        python3 main.py
        
    - name: ğŸ’¾ Commit Memory (Save State)
      # åªæœ‰ç•¶è³‡æ–™åº«æˆ– html è®Šæ›´æ™‚æ‰ commit
      run: |
        git config --global user.name "YEDAN AGI Bot"
        git config --global user.email "bot@yesinyagami.com"
        git add .
        git diff --quiet && git diff --staged --quiet || (git commit -m "ğŸ¤– AGI Auto-Sync: Memory & Revenue Update" && git push)
